import{b as p}from"./chunk-U3TLMLY2.js";import{B as l,I as g,N as c,o}from"./chunk-4LDI5GRE.js";var f=class n{http=c(p);postsCache$=null;JSON_URL="/api/blog.json";constructor(){}fetchPosts(){return this.postsCache$||(this.postsCache$=this.http.get(this.JSON_URL).pipe(l(1))),this.postsCache$}getAllPosts(){return this.fetchPosts()}getFeaturedPosts(){return this.fetchPosts().pipe(o(s=>s.filter(t=>t.featured)))}getPostById(s){return this.fetchPosts().pipe(o(t=>t.find(r=>r.id===s)))}getRelatedPosts(s,t=3){return this.fetchPosts().pipe(o(r=>{let i=r.find(e=>e.id===s);return i?r.filter(e=>e.id!==s).map(e=>{let a=e.tags.filter(h=>i.tags.includes(h)).length;return{post:e,score:a}}).filter(e=>e.score>0).sort((e,a)=>a.score-e.score).slice(0,t).map(e=>e.post):[]}))}getAllTags(){return this.fetchPosts().pipe(o(s=>{let t=new Set;return s.forEach(r=>{r.tags.forEach(i=>t.add(i))}),Array.from(t).sort()}))}getPostsByTag(s){return this.fetchPosts().pipe(o(t=>t.filter(r=>r.tags.includes(s))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as a};
